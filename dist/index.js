!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,r=function(){function t(t){this.gridSize=t,this.liveCells=[],this.setCellLive=function(t,e,i){t[i]=t[i]||[],t[i][e]=1}}return t.prototype.getCellState=function(t,e){for(var i=this.liveCells[e]&&this.liveCells[e][t],n=0,r=-1;r<=1;r++)for(var s=-1;s<=1;s++)if(0!==r||0!==s){var o=e+r,l=t+s;o<0?o=this.gridSize-1:o>=this.gridSize&&(o=0),l<0?l=this.gridSize-1:l>=this.gridSize&&(l=0),this.liveCells[o]&&this.liveCells[o][l]&&n++}return{isAlive:i,numNeighbours:n}},t.prototype.iterate=function(){for(var t=[],e=0;e<this.gridSize;e++)for(var i=0;i<this.gridSize;i++){var n=this.getCellState(i,e);(n.isAlive&&n.numNeighbours>=2&&n.numNeighbours<=3||!n.isAlive&&3===n.numNeighbours)&&this.setCellLive(t,i,e)}this.liveCells=t},t.prototype.setCellState=function(t,e,i){for(var n=[],r=0;r<this.gridSize;r++)if(this.liveCells[r]||r===e){n[r]=this.liveCells[r]||[];for(var s=0;s<this.gridSize;s++)r===e&&s===t?i?this.setCellLive(n,s,r):n[r]&&delete n[r][s]:this.liveCells[r]&&this.liveCells[r][s]&&this.setCellLive(n,s,r)}this.liveCells=n},t}(),s=function(t,e,i,n){t.beginPath(),t.rect(e*n,i*n,n,n),t.fill()},o=function(t,e,i){t.clearRect(0,0,e,i)},l=function(t,e,i){t.fillStyle="#DDD";for(var n=0;n<e;n++)for(var r=0;r<e;r++)n%2==0?r%2==0&&s(t,n,r,i):r%2!=0&&s(t,n,r,i)},a=function(t,e,i){for(var n in t.fillStyle="#484",e)for(var r in e[n]){var o=parseInt(n),l=parseInt(r);s(t,l,o,i)}},u=new class{constructor(){this.animate=!1,this.frameReqId=0,this.frameTasks=[],this.lastFrameTaskId=0,this.loop=(t=0)=>{const e=this.frameTasks.length;for(let i=0;i<e;i++)this.frameTasks[i].fn(t);this.frameReqId=requestAnimationFrame(this.loop)},this.addTasks=this.addTasks.bind(this)}addTask(t){return this.addTasks([t])[0]}addTasks(t){const e=[];return 0==t.length?e:(t.forEach(t=>{this.frameTasks.push({id:this.lastFrameTaskId,fn:t}),e.push(this.lastFrameTaskId),this.lastFrameTaskId++}),e)}deleteTask(t){this.frameTasks=this.frameTasks.filter(e=>e.id!==t)}start(t){this.animate||(this.animate=!0,this.loop())}stop(){cancelAnimationFrame(this.frameReqId),this.animate=!1}},h=0,f=0,d=!1,c=150,v=20,g=0,m=0,p=0,b=new r(v),y=document.getElementById("btn-toggle-sim"),C=document.getElementById("txt-grid-size"),S=document.getElementById("txt-interval"),T=document.getElementById("g-o-l-bg"),k=document.getElementById("g-o-l"),w=T.getContext("2d"),I=k.getContext("2d");C.value=v.toString(),S.value=c.toString();var A=k.getBoundingClientRect(),z=window.getComputedStyle(k),x=parseInt(z.width),E=parseInt(z.height);T.setAttribute("width",z.width),k.setAttribute("width",z.width),x<E?(T.style.height=z.width,k.style.height=z.width,T.setAttribute("height",z.width),k.setAttribute("height",z.width)):(T.setAttribute("height",z.height),k.setAttribute("height",z.height)),n=x/v,y.onclick=function(){d?O():L()},C.onkeyup=function(t){clearTimeout(p),p=setTimeout((function(){var e=parseInt(t.target.value);e!==v&&(n=x/(v=e),b.gridSize=v,o(w,x,E),l(w,v,n))}),1e3)},S.onkeyup=function(t){clearTimeout(p),p=setTimeout((function(){c=t.target.value}),1e3)},window.onblur=function(){O()};var M=function(t){if(0!==f){var e=Math.floor((t.clientX-A.left)/n),i=Math.floor((t.clientY-A.top)/n);if(e!==g||i!==m||f!==h){g=e,m=i;var r=f<0?1:0;b.setCellState(e,i,r),o(I,x,E),a(I,b.liveCells,n)}h=f}};k.addEventListener("contextmenu",(function(t){return t.preventDefault()})),k.onmousedown=function(t){f=0===t.button?-1:1,M(t)},k.onmousemove=M,window.onmouseup=function(){return f=0};var j=0,L=function(){u.start(),y.innerHTML="PAUSE",d=!0},O=function(){u.stop(),y.innerHTML="RUN",d=!1};l(w,v,n),u.addTask((function(t){void 0===t&&(t=0),t-j>=c&&(b.iterate(),o(I,x,E),a(I,b.liveCells,n),j=t)}))}]);
//# sourceMappingURL=index.js.map