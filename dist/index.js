!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,r=function(){function t(t){this.gridSize=t,this.liveCells=[],this.setCellLive=function(t,e,i){t[i]=t[i]||[],t[i][e]=1}}return t.prototype.getCellState=function(t,e){for(var i=this.liveCells[e]&&this.liveCells[e][t],n=0,r=-1;r<=1;r++)for(var s=-1;s<=1;s++)if(0!==r||0!==s){var l=e+r,o=t+s;l<0?l=this.gridSize-1:l>=this.gridSize&&(l=0),o<0?o=this.gridSize-1:o>=this.gridSize&&(o=0),this.liveCells[l]&&this.liveCells[l][o]&&n++}return{isAlive:i,numNeighbours:n}},t.prototype.iterate=function(){for(var t=[],e=0;e<this.gridSize;e++)for(var i=0;i<this.gridSize;i++){var n=this.getCellState(i,e);(n.isAlive&&n.numNeighbours>=2&&n.numNeighbours<=3||!n.isAlive&&3===n.numNeighbours)&&this.setCellLive(t,i,e)}this.liveCells=t},t.prototype.setCellState=function(t,e,i){for(var n=[],r=0;r<this.gridSize;r++)if(this.liveCells[r]||r===e){n[r]=this.liveCells[r]||[];for(var s=0;s<this.gridSize;s++)r===e&&s===t?i?this.setCellLive(n,s,r):n[r]&&delete n[r][s]:this.liveCells[r]&&this.liveCells[r][s]&&this.setCellLive(n,s,r)}this.liveCells=n},t}(),s=function(t,e,i,n){t.beginPath(),t.rect(e*n,i*n,n,n),t.fill()},l=function(t,e,i){t.clearRect(0,0,e,i)},o=function(t,e,i){t.fillStyle="#DDD";for(var n=0;n<e;n++)for(var r=0;r<e;r++)n%2==0?r%2==0&&s(t,n,r,i):r%2!=0&&s(t,n,r,i)},a=function(t,e,i){for(var n in t.fillStyle="#484",e)for(var r in e[n]){var l=parseInt(n),o=parseInt(r);s(t,o,l,i)}},u={glider:[[,,1],[1,,1],[,1,1]],lightweight:[[,1,1],[1,1,1,1],[1,1,,1,1],[,,1,1]],mediumweight:[[,1,1,1],[1,1,1,1,1],[1,1,1,,1,1],[,,,1,1]],heavyweight:[[,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,,1,1],[,,,,1,1]],pulsar:[[,,1,1,1,,,,1,1,1],[],[1,,,,,1,,1,,,,,1],[1,,,,,1,,1,,,,,1],[1,,,,,1,,1,,,,,1],[,,1,1,1,,,,1,1,1],[],[,,1,1,1,,,,1,1,1],[1,,,,,1,,1,,,,,1],[1,,,,,1,,1,,,,,1],[1,,,,,1,,1,,,,,1],[],[,,1,1,1,,,,1,1,1]],rpentomino:[[,1,1],[1,1],[,1]],gospargun:[[,,,,,,,,,,,,,,,,,,,,,,,,1],[,,,,,,,,,,,,,,,,,,,,,,1,,1],[,,,,,,,,,,,,1,1,,,,,,,1,1,,,,,,,,,,,,,1,1],[,,,,,,,,,,,1,,,,1,,,,,1,1,,,,,,,,,,,,,1,1],[1,1,,,,,,,,,1,,,,,,1,,,,1,1],[1,1,,,,,,,,,1,,,,1,,1,1,,,,,1,,1],[,,,,,,,,,,1,,,,,,1,,,,,,,,1],[,,,,,,,,,,,1,,,,1],[,,,,,,,,,,,,1,1]]},h=new class{constructor(){this.animate=!1,this.frameReqId=0,this.frameTasks=[],this.lastFrameTaskId=0,this.loop=(t=0)=>{const e=this.frameTasks.length;for(let i=0;i<e;i++)this.frameTasks[i].fn(t);this.frameReqId=requestAnimationFrame(this.loop)},this.addTasks=this.addTasks.bind(this)}addTask(t){return this.addTasks([t])[0]}addTasks(t){const e=[];return 0==t.length?e:(t.forEach(t=>{this.frameTasks.push({id:this.lastFrameTaskId,fn:t}),e.push(this.lastFrameTaskId),this.lastFrameTaskId++}),e)}deleteTask(t){this.frameTasks=this.frameTasks.filter(e=>e.id!==t)}start(t){this.animate||(this.animate=!0,this.loop())}stop(){cancelAnimationFrame(this.frameReqId),this.animate=!1}},d=0,f=0,c=!1,g=150,v=20,m=0,p=0,b=0,y=new r(v),C=document.getElementById("btn-toggle-sim"),T=document.getElementById("txt-grid-size"),S=document.getElementById("txt-interval"),w=document.getElementById("g-o-l-bg"),k=document.getElementById("g-o-l"),I=w.getContext("2d"),A=k.getContext("2d");T.value=v.toString(),S.value=g.toString();var z=k.getBoundingClientRect(),x=window.getComputedStyle(k),E=parseInt(x.width),M=parseInt(x.height);w.setAttribute("width",x.width),k.setAttribute("width",x.width),E<M?(w.style.height=x.width,k.style.height=x.width,w.setAttribute("height",x.width),k.setAttribute("height",x.width)):(w.setAttribute("height",x.height),k.setAttribute("height",x.height)),n=E/v,C.onclick=function(){c?F():P()},T.onkeyup=function(t){clearTimeout(b),b=setTimeout((function(){var e=parseInt(t.target.value);e!==v&&(n=E/(v=e),y.gridSize=v,l(I,E,M),o(I,v,n))}),1e3)},S.onkeyup=function(t){clearTimeout(b),b=setTimeout((function(){g=t.target.value}),1e3)};for(var j=document.getElementsByClassName("btn-preset"),B=0;B<j.length;B++){j[B].onclick=function(t){var e,i;y.liveCells=(e=t.currentTarget.id.replace("preset-",""),(i=t.currentTarget.dataset.pad?parseInt(t.currentTarget.dataset.pad):null)?function(t,e){for(var i=[],n=e+t.length,r=0;r<n;r++){var s=[];s.length=e,t[r-e],i=r<e?i.concat([s]):i.concat([s.concat(t[r-e])])}return i}(u[e],i):u[e]),l(A,E,M),a(A,y.liveCells,n)}}window.onblur=function(){F()};var L=function(t){if(0!==f){var e=Math.floor((t.clientX-z.left)/n),i=Math.floor((t.clientY-z.top)/n);if(e!==m||i!==p||f!==d){m=e,p=i;var r=f<0?1:0;y.setCellState(e,i,r),l(A,E,M),a(A,y.liveCells,n)}d=f}};k.addEventListener("contextmenu",(function(t){return t.preventDefault()})),k.onmousedown=function(t){f=0===t.button?-1:1,L(t)},k.onmousemove=L,window.onmouseup=function(){return f=0};var O=0,P=function(){h.start(),C.innerHTML="PAUSE",c=!0},F=function(){h.stop(),C.innerHTML="RUN",c=!1};o(I,v,n),h.addTask((function(t){void 0===t&&(t=0),t-O>=g&&(y.iterate(),l(A,E,M),a(A,y.liveCells,n),O=t)}))}]);
//# sourceMappingURL=index.js.map